function [u,y_ref]  = tank_ctrl(t,x, parameter_controller)
   
    x1 = x(1,:);
    x2 = x(2,:);
    x3 = x(3,:);
    
   y10 = parameter_controller(1);
   y20 = parameter_controller(2);
   y1T = parameter_controller(3);
   y2T = parameter_controller(4);
   T = parameter_controller(5);
   p1 = parameter_controller(6);
   p2 = parameter_controller(7);


   u1 = (4377800396407898125*T^3*((5520653160719109*x1)/562949953421312)^(1/2) + 8522395762053812846592*t^2*y10 - 8522395762053812846592*t^2*y1T + 2840798587351270948864*p1*t^3*y10 - 2840798587351270948864*p1*t^3*y1T - 8522395762053812846592*T*t*y10 + 8522395762053812846592*T*t*y1T + 7155462338586337500*T^3*abs(x1 - x2)^(1/2)*sign(x1 - x2) - 1420399293675635474432*T^3*p1*x1 + 1420399293675635474432*T^3*p1*y10 - 4261197881026906423296*T*p1*t^2*y10 + 4261197881026906423296*T*p1*t^2*y1T)/(92233720368547758080000*T^3);
   u2 = (2160707084972626875*T^3*((5520653160719109*x3)/562949953421312)^(1/2) + 4261197881026906423296*t^2*y20 - 4261197881026906423296*t^2*y2T + 1420399293675635474432*p2*t^3*y20 - 1420399293675635474432*p2*t^3*y2T - 4261197881026906423296*T*t*y20 + 4261197881026906423296*T*t*y2T - 3577731169293168750*T^3*abs(x2 - x3)^(1/2)*sign(x2 - x3) - 710199646837817737216*T^3*p2*x3 + 710199646837817737216*T^3*p2*y20 - 2130598940513453211648*T*p2*t^2*y20 + 2130598940513453211648*T*p2*t^2*y2T)/(46116860184273879040000*T^3);

   u = [u1; u2];
   y1_ref = (3*t^2/T^2 - 2*t^3/T^3)*(y1T - y10)+ y10;
   y2_ref = (3*t^2/T^2 - 2*t^3/T^3)*(y2T - y20)+ y20;
   y_ref = [y1_ref; y2_ref;];
end

